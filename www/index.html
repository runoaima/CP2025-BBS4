<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
        />
        <meta
            http-equiv="Content-Security-Policy"
            content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'"
        />
        <script src="cordova.js"></script>
        <script src="components/loader.js"></script>
        <link rel="stylesheet" href="components/loader.css" />
        <link rel="stylesheet" href="css/style.css" />

        <!-- Firebase SDK„ÅÆË™≠„ÅøËæº„Åø -->
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
        <script src="www/config.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="top-bar">
                <h1>Êé≤Á§∫Êùø„Ç¢„Éó„É™</h1>
                <div id="userIcon" class="user-icon">üë§</div>
            </div>

            <!-- „É°„ÉÉ„Çª„Éº„Ç∏Ë°®Á§∫„Ç®„É™„Ç¢ -->
            <div id="messageArea"></div>

            <!-- Ë™çË®º„Éï„Ç©„Éº„É†ÔºàÊú™„É≠„Ç∞„Ç§„É≥ÊôÇË°®Á§∫Ôºâ --
            <div class="auth-container logged-out">
                <div class="form-group">
                    <label for="loginEmail">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                    <input
                        type="email"
                        id="loginEmail"
                        class="form-control"
                        placeholder="example@example.com"
                    />
                </div>
                <div class="form-group">
                    <label for="loginPassword">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                    <input
                        type="password"
                        id="loginPassword"
                        class="form-control"
                        placeholder="6ÊñáÂ≠ó‰ª•‰∏ä"
                    />
                    <small class="help-text">‚ÄªÊñ∞Ë¶èÁôªÈå≤ÊôÇ„ÅØ6ÊñáÂ≠ó‰ª•‰∏ä</small>
                </div>
                <div class="button-group">
                    <button id="loginButton" class="btn-primary">
                        „É≠„Ç∞„Ç§„É≥
                    </button>
                    <button id="registerButton" class="btn-secondary">
                        Êñ∞Ë¶èÁôªÈå≤
                    </button>
                </div>
            </div>

            <!-- „É≠„Ç∞„Ç§„É≥ÊÉÖÂ†±Ôºà„É≠„Ç∞„Ç§„É≥ÊôÇË°®Á§∫Ôºâ --
            <div class="user-info logged-in">
                <span>„É≠„Ç∞„Ç§„É≥‰∏≠Ôºö<span id="userEmail"></span></span>
                <button id="logoutButton" class="btn-secondary">
                    „É≠„Ç∞„Ç¢„Ç¶„Éà
                </button>
            </div>

            <!-- ÊäïÁ®ø‰∏ÄË¶ß -->
            <div class="posts-container">
                <h2>ÊäïÁ®ø‰∏ÄË¶ß</h2>
                <div class="posts-control">
                    <select id="sortOrder" class="form-control">
                        <option value="newest">Êñ∞„Åó„ÅÑÈ†Ü</option>
                        <option value="oldest">Âè§„ÅÑÈ†Ü</option>
                    </select>
                </div>
                <div id="postsList"></div>
                <div
                    id="loadingSpinner"
                    class="loading-spinner"
                    style="display: none;"
                >
                    <div class="spinner"></div>
                    <p>Ë™≠„ÅøËæº„Åø‰∏≠...</p>
                </div>
            </div>
        </div>

        <!-- Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´„Ç¶„Ç£„É≥„Éâ„Ç¶ -->
        <div id="editModal" class="modal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ÊäïÁ®ø„ÇíÁ∑®ÈõÜ</h3>
                    <button
                        class="modal-close"
                        onclick="closeModal('editModal')"
                    >
                        &times;
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <textarea
                            id="editContent"
                            class="form-control"
                        ></textarea>
                        <small class="character-count" id="editContentCount"
                            >0/1000</small
                        >
                    </div>
                </div>
                <div class="modal-footer">
                    <button onclick="handleUpdate()" class="btn-primary">
                        Êõ¥Êñ∞
                    </button>
                    <button
                        onclick="closeModal('editModal')"
                        class="btn-cancel"
                    >
                        „Ç≠„É£„É≥„Çª„É´
                    </button>
                </div>
            </div>
        </div>

        <!-- Êñ∞Ë¶èÊäïÁ®ø„É¢„Éº„ÉÄ„É´ -->
        <div id="newPostModal" class="modal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Êñ∞Ë¶èÊäïÁ®ø</h3>
                    <button
                        class="modal-close"
                        onclick="closeModal('newPostModal')"
                    >
                        &times;
                    </button>
                </div>

                <div class="modal-body">
                    <div class="form-group">
                        <textarea
                            id="modalContentInput"
                            class="form-control"
                            placeholder="ÊäïÁ®øÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ"
                        ></textarea>
                        <small class="character-count" id="modalContentCount"
                            >0/1000</small
                        >
                    </div>

                    <div class="form-group">
                        <input type="file" id="imageInput" accept="image/*" />
                    </div>
                </div>

                <div class="modal-footer">
                    <button id="modalPostButton" class="btn-primary">
                        ÊäïÁ®ø
                    </button>
                    <button
                        onclick="closeModal('newPostModal')"
                        class="btn-cancel"
                    >
                        „Ç≠„É£„É≥„Çª„É´
                    </button>
                </div>
            </div>
        </div>

        <!-- „É≠„Ç∞„Ç§„É≥ / Êñ∞Ë¶èÁôªÈå≤„É¢„Éº„ÉÄ„É´ -->
        <div id="authModal" class="modal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>„É≠„Ç∞„Ç§„É≥ / Êñ∞Ë¶èÁôªÈå≤</h3>
                    <button
                        class="modal-close"
                        onclick="closeModal('authModal')"
                    >
                        &times;
                    </button>
                </div>

                <div class="modal-body" id="authModalBody">
                    <div class="auth-container logged-out">
                        <div class="form-group">
                            <label for="loginEmail">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                            <input
                                type="email"
                                id="loginEmail"
                                class="form-control"
                                placeholder="example@example.com"
                            />
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">„Éë„Çπ„ÉØ„Éº„Éâ</label>
                            <input
                                type="password"
                                id="loginPassword"
                                class="form-control"
                                placeholder="6ÊñáÂ≠ó‰ª•‰∏ä"
                            />
                            <small class="help-text"
                                >‚ÄªÊñ∞Ë¶èÁôªÈå≤ÊôÇ„ÅØ6ÊñáÂ≠ó‰ª•‰∏ä</small
                            >
                        </div>
                        <div class="button-group">
                            <button id="loginButton" class="btn-primary">
                                „É≠„Ç∞„Ç§„É≥
                            </button>
                            <button id="registerButton" class="btn-secondary">
                                Êñ∞Ë¶èÁôªÈå≤
                            </button>
                        </div>
                    </div>

                    <!-- „É≠„Ç∞„Ç§„É≥ÊÉÖÂ†±Ôºà„É≠„Ç∞„Ç§„É≥ÊôÇË°®Á§∫Ôºâ -->
                    <div class="user-info logged-in">
                        <span>„É≠„Ç∞„Ç§„É≥‰∏≠Ôºö<span id="userEmail"></span></span>
                        <button id="logoutButton" class="btn-secondary">
                            „É≠„Ç∞„Ç¢„Ç¶„Éà
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="profileModal" class="modal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>„Éó„É≠„Éï„Ç£„Éº„É´</h3>
                    <button
                        class="modal-close"
                        onclick="closeModal('profileModal')"
                    >
                        &times;
                    </button>
                </div>

                <div class="user-info logged-in">
                    <span>„É≠„Ç∞„Ç§„É≥‰∏≠Ôºö<span id="userEmail"></span></span>
                    <button id="logoutButton" class="btn-secondary">
                        „É≠„Ç∞„Ç¢„Ç¶„Éà
                    </button>
                </div>
            </div>
        </div>

        <!-- ÂâäÈô§Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´„Ç¶„Ç£„É≥„Éâ„Ç¶ -->
        <div id="deleteModal" class="modal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ÊäïÁ®ø„ÅÆÂâäÈô§</h3>
                    <button
                        class="modal-close"
                        onclick="closeModal('deleteModal')"
                    >
                        &times;
                    </button>
                </div>
                <div class="modal-body">
                    <p>„Åì„ÅÆÊäïÁ®ø„ÇíÂâäÈô§„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü</p>
                    <p class="text-danger">„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ</p>
                </div>
                <div class="modal-footer">
                    <button onclick="handleDelete()" class="btn-danger">
                        ÂâäÈô§
                    </button>
                    <button
                        onclick="closeModal('deleteModal')"
                        class="btn-cancel"
                    >
                        „Ç≠„É£„É≥„Çª„É´
                    </button>
                </div>
            </div>
        </div>
        <button id="floatingPostBtn" class="floating-post-btn">Ôºã</button>

        <script src="www/js/main.js"></script>
    </body>
</html>
